@namespace TaskManagerBlazor.Components
@using TaskManagerBlazor
@using TaskManagerBlazor.Layout
@using TaskManagerBlazor.Models

<style>
    table {
        position: relative;
        display: block;
        width: 100%;
        max-block-size: 40vh;
        overflow: auto;
        white-space: nowrap;
    }


    tbody {
        width: 100%;
    }

    thead {
        position: sticky;
        width: 100%;
        top: 0;
    }

    tr,
    th {
        overflow-x: auto;
    }

    @@media (min-width: 560px) {

        tbody,
        thead {
            display: table;
        }

        td,
        th {
            width: 25%;
        }
    }
</style>

<div class="table-responsive">

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Due</th>
                <th>Completed</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Items)
            {
                <tr>
                    <td>@item.Title</td>
                    <td>@item.Due.ToString("g")</td>
                    <td>
                        <input type="checkbox" checked="@item.Completed" disabled />
                    </td>
                    <td>
                        <button class="btn btn-sm btn-secondary" @onclick="() => OnEdit.InvokeAsync(item)">Edit</button>
                        <button class="btn btn-sm btn-danger" @onclick="() => OnDelete.InvokeAsync(item)">Delete</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    [Parameter] public List<TaskItem> Items { get; set; } = new();
    [Parameter] public EventCallback<TaskItem> OnEdit { get; set; }
    [Parameter] public EventCallback<TaskItem> OnDelete { get; set; }
}